# docker-compose.novpn.yml
# Run bot without VPN - direct connection

services:
  polybot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: polybot-main
    # Run as host user to avoid permission issues with mounted volumes
    user: "${UID:-1000}:${GID:-1000}"
    environment:
      - PK=${PK}
      - BROWSER_ADDRESS=${BROWSER_ADDRESS}
      - SPREADSHEET_URL=${SPREADSHEET_URL}
    volumes:
      - ./data:/app/data
      - ./positions:/app/positions
      - ./credentials.json:/app/credentials.json:ro
    restart: unless-stopped
    command: ["python", "main.py"]
    stop_grace_period: 30s
